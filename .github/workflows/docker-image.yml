name: Docker Image CI

on:
  workflow_dispatch

jobs:

  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3
    - name: Build the Docker image
      run: docker build . --file Dockerfile --tag open-test
      
    - name: Run open-test docker
      run: >
        docker run --name open-test-container -i --rm 
        --env OPEN_ENV_BRANCH=master 
        -v $PWD/reporters:/open-test/reporters 
        open-test
